{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\nexport async function detectImage(file) {\n  const formData = new FormData();\n  formData.append('file', file);\n  try {\n    const response = await axios.post(`${API_BASE_URL}/api/detect`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.detail) {\n      throw new Error(error.response.data.detail);\n    }\n    throw new Error('Failed to analyze image. Please try again.');\n  }\n}\nexport async function submitFeedback(fileHash, correctLabel, userFeedback) {\n  await axios.post(`${API_BASE_URL}/api/feedback`, {\n    file_hash: fileHash,\n    correct_label: correctLabel,\n    user_feedback: userFeedback\n  });\n}","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","detectImage","file","formData","FormData","append","response","post","headers","data","error","_error$response","_error$response$data","detail","Error","submitFeedback","fileHash","correctLabel","userFeedback","file_hash","correct_label","user_feedback"],"sources":["C:/Users/Congzhen/Desktop/xx/website/frontend/src/api/detction.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { DetectionResult } from '../types';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\r\n\r\nexport async function detectImage(file: File): Promise<DetectionResult> {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  \r\n  try {\r\n    const response = await axios.post<DetectionResult>(\r\n      `${API_BASE_URL}/api/detect`,\r\n      formData,\r\n      {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      }\r\n    );\r\n    \r\n    return response.data;\r\n  } catch (error: any) {\r\n    if (error.response?.data?.detail) {\r\n      throw new Error(error.response.data.detail);\r\n    }\r\n    throw new Error('Failed to analyze image. Please try again.');\r\n  }\r\n}\r\n\r\nexport async function submitFeedback(\r\n  fileHash: string,\r\n  correctLabel: string,\r\n  userFeedback?: string\r\n): Promise<void> {\r\n  await axios.post(`${API_BASE_URL}/api/feedback`, {\r\n    file_hash: fileHash,\r\n    correct_label: correctLabel,\r\n    user_feedback: userFeedback,\r\n  });\r\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAGzB,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAE7E,OAAO,eAAeC,WAAWA,CAACC,IAAU,EAA4B;EACtE,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEH,IAAI,CAAC;EAE7B,IAAI;IACF,MAAMI,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAI,CAC/B,GAAGV,YAAY,aAAa,EAC5BM,QAAQ,EACR;MACEK,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CACF,CAAC;IAED,OAAOF,QAAQ,CAACG,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAU,EAAE;IAAA,IAAAC,eAAA,EAAAC,oBAAA;IACnB,KAAAD,eAAA,GAAID,KAAK,CAACJ,QAAQ,cAAAK,eAAA,gBAAAC,oBAAA,GAAdD,eAAA,CAAgBF,IAAI,cAAAG,oBAAA,eAApBA,oBAAA,CAAsBC,MAAM,EAAE;MAChC,MAAM,IAAIC,KAAK,CAACJ,KAAK,CAACJ,QAAQ,CAACG,IAAI,CAACI,MAAM,CAAC;IAC7C;IACA,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EAC/D;AACF;AAEA,OAAO,eAAeC,cAAcA,CAClCC,QAAgB,EAChBC,YAAoB,EACpBC,YAAqB,EACN;EACf,MAAMtB,KAAK,CAACW,IAAI,CAAC,GAAGV,YAAY,eAAe,EAAE;IAC/CsB,SAAS,EAAEH,QAAQ;IACnBI,aAAa,EAAEH,YAAY;IAC3BI,aAAa,EAAEH;EACjB,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}